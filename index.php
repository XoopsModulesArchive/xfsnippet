<?php// $Id: index.php,v 1.1 2003/12/08 11:27:05 predator Exp $//  ------------------------------------------------------------------------ ////                XOOPS - PHP Content Management System                      ////                    Copyright (c) 2000 XOOPS.org                           ////                       <https://www.xoops.org>                             //// ------------------------------------------------------------------------- ////  This program is free software; you can redistribute it and/or modify     ////  it under the terms of the GNU General Public License as published by     ////  the Free Software Foundation; either version 2 of the License, or        ////  (at your option) any later version.                                      ////                                                                           ////  You may not change or alter any portion of this comment or credits       ////  of supporting developers from this source code or any supporting         ////  source code which is considered copyrighted (c) material of the          ////  original comment or credit authors.                                      ////                                                                           ////  This program is distributed in the hope that it will be useful,          ////  but WITHOUT ANY WARRANTY; without even the implied warranty of           ////  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the            ////  GNU General Public License for more details.                             ////                                                                           ////  You should have received a copy of the GNU General Public License        ////  along with this program; if not, write to the Free Software              ////  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307 USA ////  ------------------------------------------------------------------------ //require_once 'header.php');require_once XOOPS_ROOT_PATH . '/modules/xfsnippet/include/html.php');require_once(XOOPS_ROOT_PATH . '/modules/xfsnippet/include/snippet.php');require_once(XOOPS_ROOT_PATH . '/modules/xfsnippet/include/vars.php');require_once XOOPS_ROOT_PATH . '/class/xoopstree.php';include_once(XOOPS_ROOT_PATH . '/header.php');$typetree = new XoopsTree($xoopsDB->prefix('xf_snippet_type'), 'type_id', 'name');$lantree = new XoopsTree($xoopsDB->prefix('xf_snippet_language'), 'type_id', 'name');$cattree = new XoopsTree($xoopsDB->prefix('xf_snippet_category'), 'type_id', 'name');$GLOBALS['xoopsOption']['template_main'] = 'xfsnippet_index.html';$xoopsTpl->assign('header', snippet_header(_XF_SNP_FINDSNIPPET));$xoopsTpl->assign('purpose1', _XF_SNP_PURPOSE1);$xoopsTpl->assign('purpose2', _XF_SNP_PURPOSE2);$xoopsTpl->assign('purpose3', _XF_SNP_PURPOSE3);$main = '';$xoopsTpl->assign('contains', _XF_SNP_CONTAINS);$xoopsTpl->assign('language', _XF_SNP_LANGUAGE);$xoopsTpl->assign('category', _XF_SNP_CATEGORY);$xoopsTpl->assign('type', _XF_SNP_TYPE);$xoopsTpl->assign('license', _XF_SNP_LICENSE);$xoopsTpl->assign('search', _XF_G_SEARCH);$xoopsTpl->assign('browsebylanguage', _XF_SNP_BROWSEBYLANGUAGE);ob_start();$cattree->makeMySelBox('name', 'name', 100, 100, 'category');$selcatbox = ob_get_contents();ob_end_clean();$xoopsTpl->assign('category_box', $selcatbox);ob_start();$typetree->makeMySelBox('name', 'name', 100, 100, 'type');$seltypbox = ob_get_contents();ob_end_clean();$xoopsTpl->assign('type_box', $seltypbox);ob_start();$lantree->makeMySelBox('name', 'name', 100, 100, 'language');$sellanbox = ob_get_contents();ob_end_clean();$xoopsTpl->assign('language_box', $sellanbox);$xoopsTpl->assign('license_box', html_build_select_box_from_array($SCRIPT_LICENSE, 'license', count($SCRIPT_LICENSE) - 1));$res_language = $xoopsDB->query(    'SELECT type_id,name FROM ' .    $xoopsDB->prefix('xf_snippet_language') . ' WHERE type_id>100');//	$count = $xoopsDB->getRowsNum($res_language);while (false !== ($db = $xoopsDB->fetchArray($res_language)) {    $sql = 'SELECT COUNT(*) FROM ' .           $xoopsDB->prefix('xf_snippet') . ' WHERE language=' .           $db['type_id'];    $result = $xoopsDB->query($sql);    $main .= '			<LI><A HREF="' . XOOPS_URL .             '/modules/xfsnippet/browse.php?by=lang&lang=' .             $db['type_id'] . '">' . $db['name'] . '</A> (' .             unofficial_getDBResult($result, 0, 0) . ')<BR>';}$main .=    '</TD>		<TD valign="top">		<B>' . _XF_SNP_BROWSEBYCATEGORY . ':</B>		<P>';$res_category = $xoopsDB->query(    'SELECT type_id,name FROM ' .    $xoopsDB->prefix('xf_snippet_category') . ' WHERE type_id>100');//$count = count($SCRIPT_CATEGORY);while (false !== ($db = $xoopsDB->fetchArray($res_category)))) {    $sql = 'SELECT COUNT(*) FROM ' . $xoopsDB->prefix('xf_snippet') .           ' WHERE category=' . $db['type_id'];    $result = $xoopsDB->query($sql);    $main .= '			<LI><A HREF="' . XOOPS_URL .             '/modules/xfsnippet/browse.php?by=cat&cat=' .             $db['type_id'] . '">' . $db['name'] . '</A> (' .             unofficial_getDBResult($result, 0, 0) . ')<BR>';}$xoopsTpl->assign('main', $main;include_once(XOOPS_ROOT_PATH . '/footer.php';